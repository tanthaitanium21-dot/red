<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>App</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .ok {
            color: green;
            font-size: 22px;
            font-weight: bold;
        }
        .error {
            color: red;
            font-size: 22px;
            font-weight: bold;
        }
    </style>
</head>

<body>

    <h2 id="status">กำลังโหลดข้อมูล...</h2>
    <div id="app"></div>

    <script type="module">

        import { loadAppData } from "./js/loader.js";
        import "./js/main.js";

        async function start() {
            const status = document.getElementById("status");

            try {
                const data = await loadAppData();

                if (!data) {
                    status.className = "error";
                    status.innerText = "โหลดข้อมูลล้มเหลว";
                    return;
                }

                status.className = "ok";
                status.innerText = "ข้อมูลโหลดสำเร็จ";

                // ส่งให้ main.js ใช้
                window.appData = data;

                if (window.initApp) {
                    window.initApp();
                }

            } catch (err) {
                status.className = "error";
                status.innerText = "เกิดข้อผิดพลาด";
                console.error(err);
            }
        }

        start();

    </script>

</body>
</html>
